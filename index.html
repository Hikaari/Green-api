<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>GREEN-API WhatsApp Integration</title>
<style>
    body { font-family: Arial, sans-serif; padding: 20px; }
    label, input, button { margin: 8px; }
</style>
</head>
<body>
<h2>GREEN-API WhatsApp Integration</h2>

<label for="idInstance">Instance ID:</label>
<input type="text" id="idInstance" name="idInstance" required><br>

<label for="apiToken">API Token:</label>
<input type="text" id="apiToken" name="apiToken" required><br>

<button onclick="getSettings()">Get Settings</button>
<button onclick="getStateInstance()">Get State Instance</button>
<button onclick="sendMessage()">Send Message</button>
<button onclick="sendFileByUrl()">Send File By URL</button>

<h3>Response:</h3>
<textarea id="response" style="width: 100%; height: 150px;" readonly></textarea>

<script>
    const apiBase = "https://7103.api.greenapi.com/waInstance";

    function getSettings() {
        const id = document.getElementById('idInstance').value;
        const token = document.getElementById('apiToken').value;
        fetch(`${apiBase}${id}/getSettings/${token}`)
            .then(response => response.text())
            .then(text => document.getElementById('response').value = text)
            .catch(error => document.getElementById('response').value = 'Error: ' + error);
    }

    function getStateInstance() {
        const id = document.getElementById('idInstance').value;
        const token = document.getElementById('apiToken').value;
        fetch(`${apiBase}${id}/getStateInstance/${token}`)
            .then(response => response.text())
            .then(text => document.getElementById('response').value = text)
            .catch(error => document.getElementById('response').value = 'Error: ' + error);
    }

    function sendMessage() {
        const id = document.getElementById('idInstance').value;
        const token = document.getElementById('apiToken').value;
        const data = {
            chatId: "11001234567@c.us",
            message: "I use Green-API to send this message to you!"
        };

        fetch(`${apiBase}${id}/sendMessage/${token}`, {
            method: 'POST',
            headers: {'Content-Type': 'application/json'},
            body: JSON.stringify(data)
        })
        .then(response => response.text())
        .then(text => document.getElementById('response').value = text)
        .catch(error => document.getElementById('response').value = 'Error: ' + error);
    }

    function sendFileByUrl() {
        const id = document.getElementById('idInstance').value;
        const token = document.getElementById('apiToken').value;
        const data = {
            chatId: "11001234567@c.us",
            urlFile: "https://avatars.mds.yandex.net/get-pdb/477388/77f64197-87d2-42cf-9305-14f49c65f1da/s375",
            fileName: "horse.png",
            caption: "лошадка"
        };

        fetch(`${apiBase}${id}/sendFileByUrl/${token}`, {
            method: 'POST',
            headers: {'Content-Type': 'application/json'},
            body: JSON.stringify(data)
        })
        .then(response => response.text())
        .then(text => document.getElementById('response').value = text)
        .catch(error => document.getElementById('response').value = 'Error: ' + error);
    }
</script>
</body>
</html>
